+++
title = "Jellyfin Struggles"
date = 2025-12-11

[taxonomies]
tags = ["jellyfin"]
+++

So after the great success of putting jellyfin on a subdomain, I set up my
brother-in-law with an account and asked him to test it out. After getting
logged in, he gladly texted me that it worked beautifully for him.

{{ image(src="/2025-12-11/fast_as_fuck_boi.png",
         alt="Fast as fuck",
         position="left",
         style="width: 25%;") }}

Another rousing success. He lives several states over, so this proves out
everything from my jellyfin account setup to my symmetric gigabit fiber
connection. Until the following day when I was sent the following:

{{ image(src="/2025-12-11/buffering.png",
         alt="buffering",
         position="left",
         style="width: 50%;") }}

Fuuuuuck. This isn't exactly surprising. This is a raspberry pi 4b, not a data
center. Just for a sanity check let's make sure this actually _is_ the raspberry
pi struggling. A peek at top while running the working video vs the non-working
video shows a struggling average CPU utilization vs an absolutely pegged CPU
utilization.

{{ image(src="/2025-12-11/btm_not_pegged.png",
         alt="buffering",
         position="left",
         style="width: 50%;") }}

{{ image(src="/2025-12-11/btm_pegged.png",
         alt="buffering",
         position="left",
         style="width: 50%;") }}

Clearly, even with the working file, there's never going to be more than a
single stream at a time. The successful streaming was with an `.mkv` file while
the unsuccessful stream was an `.mp4`. Could it be that simple? Of course not.
The BiL did some nice investigation, using the video overlay to look at the
differences between 2 `.mkv` files. One works and one doesn't.

{{ image(src="/2025-12-11/264_overlay.jpg",
         alt="H.264",
         position="left",
         style="width: 50%;") }}

{{ image(src="/2025-12-11/265_overlay.jpg",
         alt="H.265",
         position="left",
         style="width: 50%;") }}

Once again, given the opportunity, the universe lays bare my ignorance. The [mkv file format](https://en.wikipedia.org/wiki/Matroska) is just a container. The
important part is the codec of the video contained within. All of the working
videos were [H.264](https://en.wikipedia.org/wiki/Advanced_Video_Coding) and the
others were [H.265](https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding).

At this point I know that I'm limited to one single stream of H.264 encoded
video.
