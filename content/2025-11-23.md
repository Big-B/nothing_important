+++
title = "Setting up the blog"
date = 2025-11-23

[taxonomies]
tags = ["blog", "zola", "networking"]
+++

Looks like there's some decent instructions
[here](https://medium.com/@AustinNewtonTech/how-to-deploy-self-host-your-own-blog-w-nginx-2b9bb641f2a8).
Instructions are fairly old and for Ubuntu. We'll have to figure out what
changes to make for archlinuxarm, since this'll be hosted on a raspberry
pi...4? Yup, can confirm:
```bash
> cat /sys/firmware/devicetree/base/model
Raspberry Pi 4 Model B Rev 1.2%
```

First step is to install nginx with some ubuntu style installation commands.
Let's see what the [archwiki](https://wiki.archlinux.org/title/Nginx) says.
What the fuck is angie?

A quick nerd-snipe later and it seems that it's probably worth investigating
later, but not going to provide anything worth the off-the-road issues now.
`nginx-mainline` it is then. We're not here for stability and major bugfixes
only.

`sudo pacman -S nginx-mainline`

Okay, next up, Jekyll? I have literally no idea what Jekyll is. The article
intro calls it a "theme", but what exactly is it... theming??? Let's punt
and see if the wiki says anything. My god, this wiki
[never lets me down](https://wiki.archlinux.org/title/List_of_applications/Internet#Static_site_generators). That tracks, static site generator, but there's a list of options here. Trying to not get sniped here again, zola looks like it's worth investigating.

Fuck it, zola it is. It's a wonder if we'll ever get to a website, but I'm
enticed by [their docs](https://www.getzola.org/documentation/getting-started/overview/). Also, I'm currently documenting this using vimwiki, and I just found out there's officially markdown support. I need to figure out how to get that working, seems like an easy win if I can just do everything in markdown from now on.

`sudo pacman -S zola`

Aww shit, immediately running into a delta. Article starts downloading
themes. Gonna have to dive into zola docs to see if we can't come out the
other side here.

Oh god, oh fuck! HTML templates? Also, HTML filetypes seemed to cause some
issue with my nvim plugins. Some access denied issue with a file in
~/.cache/nvim/luac? Pff, cache? We'll just rm -rf that and move on. Works
like a charm.

So far this is a lot of copy/paste of these templates, trying to understand
wtf is going on under the hood here. Looks like it's a bunch of substitution
happening. Of course, I might be better prepared to understand this had I
ever followed through with learning HTML or webdev in general.

`zola serve` and... can't access it. Foiled again by my non-standard setup.
Developing over ssh on the raspberry pi via my laptop. I suspect the zola
process literally only supports localhost, which is why I can't reach it
from the laptop browser. Need to see if I can change the listening IP to
0.0.0.0.

Sure enough, `zola serve --interface 0.0.0.0`. We're in business.

Worked through the list, creating the first and second example blogs,
listing the blogs on the main index. Ran into an interesting issue where all
the links forwarded to `0.0.0.0`, which aren't valid. Had to change to using
`zola serve --interface <actual lan ip>` to get the links to work.

Jumping back into the original article, we'll skip all the configuration for
jekyll, right into the "Webserver & Reverse Proxy" section. At first blush,
it's looking to move a "\_site" folder into the nginx area. Well, I don't
got one of those with zola. Let's see what the hell we need to do to resolve
that. Perhaps zola can generate it? Zola build looks promising.

`sudo zola build --output-dir /usr/share/nginx/html/public`. Some permission
issues going on there, throwing a `sudo` at it resolved, but I'm not sure if
that's the right way to handle things. It works for now, we'll just call
that tech debt and move on.

On to copying the template nginx config, modifying for our needs. Looks like
it's just modifying the website name and the root path. The default arch
config has a bunch of extras in it. I merely changed the server_name,
modified the first `location` block, and added a second `server` block.
Let's start the nginx service: `sudo systemctl start nginx`.

Womp womp, service failed. Address already in use for 0.0.0.0. I suspect
this is due to pihole. I wonder if I can setup pihole to use a different
port, then set nginx to forward to that port for the duration of this
project. Quick shutdown of pihole-FTL, bumping the ports up by one, and a
restart, and finally we're working. Still a redirect issue with the given
hostname, I need to get that resolved.

Resolved it by replacing it with a lan hostname. Easy peasy.

Next step is all the networking stuff. My personal setup is a little goofy,
I have an AT&T account where I'm forced to use their fiber modem/router
combo. Behind that, I have my own personal vpn router. The logic behind that
is that the fiber hookup is in the far north side of the house near the
garage where having WiFi is worthless. So I disable the WiFi on the AT&T
router, the vpn router doesn't have it, and I have a 3rd router acting as an
access point in the middle of my house. The current issue is that I think I
need the AT&T router to be in passthrough mode so that the vpn router is
what the outside world sees, so that I can then use the dynamic DNS
functionality to point my domain at my device.

_Unfortunately_, when google shed its DNS to squarespace, I lost the ability
to utilize dynamic DNS and now need to transfer the domain to cloudflare.
That's in progress, but will likely put this project off until I get that
resolved. So for now, goodnight!
